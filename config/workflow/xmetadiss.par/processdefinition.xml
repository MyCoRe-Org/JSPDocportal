<?xml version="1.0" encoding="UTF-8"?>

<process-definition
  xmlns="urn:jbpm.org:jpdl-3.1"  name="xmetadiss">

  <!-- SWIMLANES (= process roles) -->

  <swimlane name="author" />
  
  <swimlane name="editor">
    <!--   <assignment expression="user(ernie)" /> -->
  </swimlane>
  
  <swimlane name="subjectExpert">
    <!--   <assignment expression="user(ernie)" /> -->
  </swimlane>  

  
  <start-state name="start">
    <task swimlane="author">
      <controller>
        <variable name="userid"/>
      </controller>
    </task>
    <transition to="existingAuthor" />
    <transition to="newAuthor" />
  </start-state>

  <state name="newAuthor">
  	<transition name="creating author" to="existingAuthor" />
  </state>
    
  <state name="existingAuthor">
  	<transition name="create urn" to="urnCreated" />
  </state>
  
  <state name="urnCreated">
  	<transition name="createDisshab" to="disshabCreated" />
  </state>
  
  <state name="disshabCreated">
     <transition name="todo next" to="todonext" />
  </state>
  
  <state name="todonext">
    <transition to="end" />
  </state>
  
<!--   
  <task-node name="createMetadata">
    <task swimlane="author">
      <controller>
        <variable name="metadataFilename"/>
        <variable name="isMetadataCorrect" />
      </controller>
    </task>
    <transition name="ok" to="uploadFiles" />
    <transition name="correctMetadata" to="correctMetadata" />
  </task-node>  
  
  <task-node name="uploadFiles">
    <task swimlane="author">
      <controller>
        <variable name="derivateFilename"/>
      </controller>
    </task>
    <transition to="end" />
  </task-node>    
  
  <task-node name="correctMetadata">
    <task swimlane="author">
      <controller>
        <variable name="metadataFilename"/>
        <variable name="isMetadataCorrect" />
      </controller>
    </task>
    <transition name="ok" to="uploadFiles" />
  </task-node>   
-->
  <end-state name="end" />
  
</process-definition>